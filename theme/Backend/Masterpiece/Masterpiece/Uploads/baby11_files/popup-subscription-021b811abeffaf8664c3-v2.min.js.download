"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["popup-subscription"],{18856:(e,t,r)=>{r.r(t),r.d(t,{Container:()=>p});var o=r(63696),n=r(2837),i=r(7902),s=r(67435),a=r(43064),c=r(90610),u=r(87469);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},l.apply(this,arguments)}const p=()=>{const e=(0,n.q)(c.l.active),t=i.Oo[e];return(()=>{const e=(0,s.zy)(),{pathname:t}=o.useDeferredValue(e),{showSubscriptionPopup:r}=(0,a.J)();o.useEffect((()=>{const e=i._o[t];e&&r(e)}),[t])})(),t?o.createElement(u.W,l({},t,{onClose:()=>c.l.active(void 0)})):null}},7902:(e,t,r)=>{r.d(t,{Bf:()=>i,Dc:()=>l,FT:()=>a,IG:()=>u,Oo:()=>v,Yg:()=>d,ZF:()=>c,_o:()=>f,i7:()=>s,z9:()=>p});var o=r(94170),n=r(420);const i=7,s=15e3,a="subscription-popup",c=o.nY,u=o.$J,l="subscription_popup_shown_at",p=1e3,d=2e3,v={[n.e.SubscriptionCart]:{copy:"Donâ€™t lose reserved items. Get alerts before your cart timer expires, subscribe to Cart Status emails.",subscriptionId:"CART_ABANDONMENT",title:"Get cart status alerts"},[n.e.SubscriptionFavorites]:{copy:"Be the first to know when your favorites drop in price by subscribing to our Favorites emails.",subscriptionId:"FAVORITES",title:"Get price drop alerts"},[n.e.SubscriptionSavedSearches]:{copy:"Be the first to shop new items that match your search by subscribing to our Saved Search emails.",subscriptionId:"SAVED_SEARCH",title:"Get new arrival alerts"}},f={"/saved/favorites":n.e.SubscriptionFavorites,"/saved/searches":n.e.SubscriptionSavedSearches}},90730:(e,t,r)=>{r.d(t,{G:()=>a});var o=r(63696),n=r(76344),i=r(26850),s=r(16661);const a=()=>{var e,t;const{profile:r}=(0,o.useContext)(n.F_),{setClientConfiguration:a}=(0,i.t)(),c=s.qO.Modals,u=s.w6.SubscriptionPopup;return[null!==(e=null===(t=r.clientConfiguration)||void 0===t||null===(t=t[c])||void 0===t?void 0:t[u])&&void 0!==e?e:0,e=>a(c,u,e)]}},43064:(e,t,r)=>{r.d(t,{J:()=>S});var o=r(63696),n=r(11956),i=r(90511),s=r(7902),a=(r(82367),r(76344)),c=r(62236),u=r(90730),l=r(63737),p=r(81449),d=r(35339),v=r(79682),f=r(72678),b=r(90610);const S=()=>{const e=(0,o.useContext)(n.P9),t="on_qa"===(0,p.S)(l.cQ)?s.IG:s.ZF,r=(()=>{const e=(0,c.r)(l.cQ,["on","on_qa"]),{profile:t}=(0,o.useContext)(a.F_),[r]=(0,u.G)(),{loggedIn:n}=t,i=r>=s.Bf;return n&&e&&!i})(),{checkStatus:S}=(()=>{const{profile:e}=(0,o.useContext)(a.F_),[t]=(0,d._)(v),{id:r}=e;return{checkStatus:async(e,o)=>{var n,i;if(!r)return!1;const{data:s}=await t({variables:{userId:r}});if(!s)return!1;const{preferences:a}=s.notificationPreferences,c=(0,f.I)(e,a);return null!==(n=null==c||null===(i=c.channels)||void 0===i?void 0:i[o])&&void 0!==n&&n}}})();return{showSubscriptionPopup:o=>{if(!r)return;const{subscriptionId:n}=s.Oo[o],a=e===i.O.Desktop?s.Yg:s.z9;setTimeout((async()=>{b.l.active()||(()=>{var e;const r=null===(e=window)||void 0===e||null===(e=e.localStorage)||void 0===e?void 0:e.getItem(s.Dc);return r&&Date.now()-parseInt(r,10)<t})()||await S(n,"email")||(b.l.active(o),(()=>{var e;const t=Date.now().toString();null===(e=window)||void 0===e||null===(e=e.localStorage)||void 0===e||e.setItem(s.Dc,t)})())}),a)}}}},72678:(e,t,r)=>{r.d(t,{I:()=>i,X:()=>n});var o=r(16066);const n=(e,t)=>t.some((t=>{let{campaign:r}=t;return r.itemNumber===e})),i=(e,t)=>{if(!t)return;const r=t.map((t=>{if((0,o.g)(t))return t.preferences.find((t=>t.id===e))})).find((e=>!!e));return null!=r?r:void 0}},16066:(e,t,r)=>{r.d(t,{L:()=>n,g:()=>o});const o=e=>void 0!==e.preferences,n=e=>void 0!==e.url}}]);