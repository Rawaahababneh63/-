(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["client_global_interfaces_keyboard_ts-client_global_services_search_hooks_useRecentSearchesAdd-b64466"],{20230:(e,n,t)=>{"use strict";t.d(n,{z:()=>i});let i=function(e){return e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.Enter="Enter",e.Escape="Escape",e.Space=" ",e}({})},78856:(e,n,t)=>{"use strict";t.d(n,{M:()=>v}),t(82367);var i=t(63696),a=t(4658),r=t(67435),o=t(37338),c=t(5995),s=t(78437),d=t(78792),u=t(11956),l=t(76344),f=t(90511),m=t(49643),p=t(90696);const v=()=>{const e=(0,i.useContext)(u.P9),n=(0,i.useContext)(l.F_),t=(0,r.zy)(),[v]=(0,a.n)(o),h=e===f.O.Mobile,S=(0,m.u)(n,{withExperiments:!0}),g=(e,n)=>{var t;const i=null===(t=n.data)||void 0===t?void 0:t.addRecentSearchV2;if(null==i||!i.length)return;const a=h?s.ll:d.Qn;e.writeQuery({data:{recentSearchesV2:i},query:c,variables:{input:{last:a,userInfo:S}}}),e.writeQuery({data:{recentSearchesV2:i},query:c,variables:{input:{last:1,userInfo:S}}})};return{addRecentSearch:async e=>{var n;const i="value"in e?e.value:e.searchTerm,{filtersInput:a,suggestionId:r}=e;if(!S.userId||!a||!i)return;const{page_type:o}=(0,p.He)(t),c={input:{clientPageType:o,filters:a,last:1,searchTerm:i,skipSpellcheck:null!==(n=e.skipSpellcheck)&&void 0!==n&&n,suggestionId:r,userInfo:S}};try{const e=await v({update:g,variables:c}),{data:n,errors:t}=e;if(t)throw t;return n}catch{return null}}}}},80086:(e,n,t)=>{"use strict";t.d(n,{I:()=>s});var i=t(63696),a=t(67435),r=t(73306),o=t(95873),c=t(90696);const s=()=>{const e=(0,a.zy)(),{trackEvent:n}=(0,i.useContext)(r.JX),t={event_category:"typeahead",page_type:(0,c.He)(e).page_type};return{trackSuggestedTerm:e=>{const{action:i,department:a,interpretationId:r,objectId:c,objectIdx:s,queryId:d,queryType:u,searchTerm:l,source:f,suggestionId:m}=e,p={...t,department_tag:a,event_action:i,event_label:f,object_id:null!=c?c:"missing-follow-up",query_id:d,suggestion_id:null!=m?m:"-999"},v={action:i,interpretation_id:null!=r?r:void 0,object_id:null!=c?c:"missing-follow-up",object_idx:s,query_id:null!=d?d:void 0,query_type:u,search_term:l||null,search_type:f,selected_department:a,suggestion_id:null!=m?m:"-999"};n(p,{addEventName:!1,skipSnowplow:!0}),(0,o.d)(v)},trackUntaggedTerm:(e,i)=>{const{action:a,interpretationId:r,department:c,objectId:s,objectIdx:d,queryId:u,queryType:l,searchTerm:f,source:m,suggestionId:p}=e,v={...t,department_tag:c,event_action:a,event_label:m,object_id:null!=s?s:null,query_id:u,suggestion_id:null!=p?p:"-888"},h={action:a,interpretation_id:null!=r?r:void 0,object_id:null!=s?s:void 0,object_idx:d,query_id:null!=u?u:void 0,query_type:l,search_term:f||null,search_type:m,selected_department:c,selected_item_number:i?"".concat(i):void 0,suggestion_id:null!=p?p:"-888"};n(v,{addEventName:!1,skipSnowplow:!0}),(0,o.d)(h)}}}},32291:(e,n,t)=>{"use strict";t.d(n,{ew:()=>m,tI:()=>f}),t(76281),t(20518),t(93062),t(82367);var i=t(18264),a=t.n(i),r=t(46643),o=t.n(r),c=t(99828),s=t(34228),d=t(55958),u=t(86334);const l=e=>{const n=Object.keys(e),t=n.includes(d.oN),i=1===n.length;return t&&i},f=e=>Object.entries(e).reduce(((e,n)=>{const[t,i]=n,a=(e=>Number.isNaN(e)||null==e?null:Array.isArray(e)?e.map(String):"string"==typeof e?e:"object"==typeof e?Object.values(e).map(String):String(e))(i);return a?{...e,[t]:a}:e}),{}),m=(e,n,t,i,r,m,p,v,h)=>{const S=a()(e,{department_tags:["women"]}),g=a()(e,{category_tags:["dresses"],department_tags:["women"]}),k=a()(e,{category_tags:["jeans"],department_tags:["women"]});if(v&&g&&["dress","dresses"].includes(n))return{pathname:"lp/dress-shop/plp/women/dresses",search:"department_tags=women&category_tags=dresses"};if(v&&(k&&"jeans"===n||S&&"denim"===n))return{pathname:"/lp/denimshop/plp/women/jeans",search:"department_tags=women&category_tags=jeans"};if(p){const t=((e,n)=>{const t=n.toLowerCase().trim(),i=f(e),a=l(e),r=d.vr.includes(t);if(a&&r){const e=t.replace(/\s+/g,"-"),n=o()(e);return{pathname:"/category/".concat(n),search:(0,c.A)(i,!0)}}return null})(e,n);if(t)return t}const _=!r&&n?{...f(e),text:n}:{...f(e)},y=m&&!n?{..._,context:u.uG.srp}:_;h&&(y.sort=h);const w=(0,s.U)(y);return l(e)&&i&&(r&&(y.text=n),y.skip_spellcheck="true"),t&&(y.skip_fallback="true"),{pathname:w,search:(0,c.A)(y,!0)}}},95873:(e,n,t)=>{"use strict";t.d(n,{d:()=>o,m:()=>r});var i=t(1907),a=t(15029);const r=e=>{(0,i.YH)({event:{data:e,schema:a.S.QueryCorrectionEvent}})},o=e=>{(0,i.YH)({event:{data:e,schema:a.S.TypeaheadActionEvent}})}},65552:(e,n,t)=>{var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"recentSearchV2"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RecentSearchV2"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"itemsSearchResult"},directives:[]}]}}],loc:{start:0,end:108}};i.loc.source={body:"#import './itemsSearchResult.graphql'\n\nfragment recentSearchV2 on RecentSearchV2 {\n  ...itemsSearchResult\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,n)})),e.definitions&&e.definitions.forEach((function(e){r(e,n)}))}i.definitions=i.definitions.concat(t(37098).definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)})));var o={};function c(e,n){for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t];if(i.name&&i.name.value==n)return i}}i.definitions.forEach((function(e){if(e.name){var n=new Set;r(e,n),o[e.name.value]=n}})),e.exports=i,e.exports.recentSearchV2=function(e,n){var t={kind:e.kind,definitions:[c(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=o[n]||new Set,a=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var s=r;r=new Set,s.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(n){var i=c(e,n);i&&t.definitions.push(i)})),t}(i,"recentSearchV2")},37338:(e,n,t)=>{var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"addRecentSearchV2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddRecentSearchV2Input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addRecentSearchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"recentSearchV2"},directives:[]}]}}]}}],loc:{start:0,end:173}};i.loc.source={body:"#import '../fragments/recentSearchV2.graphql'\n\nmutation addRecentSearchV2($input:AddRecentSearchV2Input!) {\n  addRecentSearchV2(input: $input) {\n    ...recentSearchV2\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,n)})),e.definitions&&e.definitions.forEach((function(e){r(e,n)}))}i.definitions=i.definitions.concat(t(65552).definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)})));var o={};function c(e,n){for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t];if(i.name&&i.name.value==n)return i}}i.definitions.forEach((function(e){if(e.name){var n=new Set;r(e,n),o[e.name.value]=n}})),e.exports=i,e.exports.addRecentSearchV2=function(e,n){var t={kind:e.kind,definitions:[c(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=o[n]||new Set,a=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var s=r;r=new Set,s.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(n){var i=c(e,n);i&&t.definitions.push(i)})),t}(i,"addRecentSearchV2")},5995:(e,n,t)=>{var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getRecentSearchesV2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RecentSearchesV2Input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"recentSearchesV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"recentSearchV2"},directives:[]}]}}]}}],loc:{start:0,end:169}};i.loc.source={body:"#import '../fragments/recentSearchV2.graphql'\n\nquery getRecentSearchesV2($input:RecentSearchesV2Input!){\n  recentSearchesV2(input: $input) {\n    ...recentSearchV2\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,n)})),e.definitions&&e.definitions.forEach((function(e){r(e,n)}))}i.definitions=i.definitions.concat(t(65552).definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)})));var o={};function c(e,n){for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t];if(i.name&&i.name.value==n)return i}}i.definitions.forEach((function(e){if(e.name){var n=new Set;r(e,n),o[e.name.value]=n}})),e.exports=i,e.exports.getRecentSearchesV2=function(e,n){var t={kind:e.kind,definitions:[c(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=o[n]||new Set,a=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var s=r;r=new Set,s.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(n){var i=c(e,n);i&&t.definitions.push(i)})),t}(i,"getRecentSearchesV2")}}]);