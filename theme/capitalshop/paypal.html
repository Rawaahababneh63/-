<!DOCTYPE html>
<html>
<head>
    <title>MyProgrammingBook</title>
    <link rel="stylesheet" type="text/css" href="paypal.css">
    <meta name="description" content>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/x-icon" href="assets/img/icon/favicon.png">
<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="assets/css/bootstrap.min.css">
<link rel="stylesheet" href="assets/css/owl.carousel.min.css">
<link rel="stylesheet" href="assets/css/slicknav.css">
<link rel="stylesheet" href="assets/css/flaticon.css">
<link rel="stylesheet" href="assets/css/animate.min.css">
<link rel="stylesheet" href="assets/css/price_rangs.css">
<link rel="stylesheet" href="assets/css/magnific-popup.css">
<link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
<link rel="stylesheet" href="assets/css/themify-icons.css">
<link rel="stylesheet" href="assets/css/slick.css">
<link rel="stylesheet" href="assets/css/nice-select.css">
<link rel="stylesheet" href="assets/css/style.css">
<link rel="stylesheet" href="Content/css/CleanOut.css">
<!-- مكابة لاضافة خط كايرو وخط اخر لكل التيمبلت -->
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
<!-- /// -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
<!--للاقسام ملابس جبتهم من تيبملت اختبار -->
<script src="https://cdn.jsdelivr.net/npm/mixitup@3/dist/mixitup.min.js"></script>
<!-- ////////////////  هاد لاراء -->
  <!-- Bootstrap CSS  لاراء-->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
<!-- contact -->
    <!-- الروابط الصحيحة لـ Bootstrap و jQuery -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/MaterialDesign-Webfont/3.6.95/css/materialdesignicons.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/style.css">

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            background-color: #f5f5f5;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
      
        }

        .product-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-wrap: wrap;
        }

        .product-image-container {
            flex: 1;
            max-width: 400px;
            margin-right: 20px;
        }

        .product-image-container img {
            width: 100%;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .product-info-container {
            flex: 2;
        }

        h1 {
            font-size: 2em;
            margin-top: 0;
            color: #333;
        }

        .price {
            color: #ff5722;
            font-size: 1.8em;
            font-weight: bold;
            margin-top: 10px;
        }

        .product-description {
            font-size: 1em;
            color: #666;
            line-height: 1.6;
            margin: 20px 0;
        }

        .terms {
            font-size: 0.9em;
            color: #999;
        }

        button {
            background-color: #ff5722;
            border: none;
            color: white;
            padding: 12px 24px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 1em;
            margin: 10px 0;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #e64a19;
        }

        #paypal-button-container {
            margin-top: 20px;
        }
.product-card {
    display: flex;
    flex-direction: column;
    border: 1px solid #ccc;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    max-width: 400px;
    margin: 20px auto; /* إضافة هامش علوي */
    background-color: #fff;
}

.image-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    background-color: #f9f9f9;
}

.product-image {
    max-width: 100%;
    height: auto;
}

.details-wrapper {
    padding: 20px;
}

.product-title {
    font-size: 24px;
    margin-bottom: 10px;
    color: #333;
}

.price {
    font-size: 20px;
    color: #d9534f;
    margin-bottom: 15px;
}

.description {
    font-size: 16px;
    color: #555;
    margin-bottom: 15px;
}

.terms {
    font-size: 14px;
    color: #777;
    margin-bottom: 15px;
}

.paypal-button-container {
    margin-top: 20px;
}
.product-card {
    display: flex;
    flex-direction: column;
    border: 1px solid #ccc;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    max-width: 400px;
    margin: auto;
    margin-top: 5%;
    margin-bottom: 5%;
    background-color: #fff;
}

.image-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    background-color: #f9f9f9;
}

.product-image {
    max-width: 100%;
    height: auto;
}

.details-wrapper {
    padding: 20px;
}

.product-title {
    font-size: 24px;
    margin-bottom: 10px;
    color: #333;
}

.price {
    font-size: 20px;
    color: #d9534f;
    margin-bottom: 15px;
}

.description {
    font-size: 16px;
    color: #555;
    margin-bottom: 15px;
}

.terms {
    font-size: 14px;
    color: #777;
    margin-bottom: 15px;
}

.paypal-button-container {
    margin-top: 20px;
}
    </style>
</head>
<body>
    <header>
        <div class="header-area">
            <!-- الجزء الأول (Header-Top) -->
            <div class="header-top d-none d-sm-block">
                <div class="container1" style="margin-left: 3%;margin-right: 3%;">
                    <div class="row">
                        <div class="col-xl-12">
                            <div class="d-flex justify-content-between flex-wrap align-items-center">
                                <div class="header-info-left">
                                    <ul>
                                        <li><a href="CleanOut.html#faq">الأسئلة الشائعة</a></li>
                                        <li><a href="About1.html">معلومات عنا</a></li>
                                    </ul>
                                </div>
                                <div class="header-info-right d-flex">
                                  
                                    <ul class="header-social">
                                        <li><a href="https://www.facebook.com/RawaahAbdAlrahman?_rdc=1&_rdr"><i class="fab fa-facebook"></i></a></li>
                                        <li><a href="https://www.instagram.com/rawaahababneh/"><i class="fab fa-instagram"></i></a></li>
                                        <li><a href="https://x.com/?lang=en"><i class="fab fa-twitter"></i></a></li>
                                        <li><a href="https://www.linkedin.com/in/rawa-ah-a-331b8023b/"><i class="fab fa-linkedin-in"></i></a></li>
                                        <li><a href="https://www.youtube.com/@rawaahababneh4863"><i class="fab fa-youtube"></i></a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
            <!-- الجزء الثاني (Header-Bottom) -->
            <div class="header-bottom text-center">
                <p dir="rtl">تخفيضات تصل إلى 50%  أسرع ! العرض لفترة محدودة <a href="shopp.html" class="browse-btn">تسوق الآن</a></p>
            </div>
        
            <!-- الجزء الثالث (Header-Mid) -->
            <div class="header-mid header-sticky">
                <div class="container1">
                    <div class="menu-wrapper" style="margin: 0px;">
                        <div class="logo" style="margin-left: 1%">
                            <a href="index.html"><img src="assets/img/logo/logo.png" alt="الشعار"></a>
                        </div>
                        <div class="main-menu d-none d-lg-block">
                            <nav>
                                <ul id="navigation">
                                
                                    <li><a href="#">البيع</a>
                                        <ul class="submenu">
                                            <li style="text-align:center;"><a href="CleanOut.html">بيع معنا</a></li>
                     
                                        </ul>
                                    </li>
                                    <li><a href="index.html#Contact">تواصل معنا</a></li>
                                    <li class="new">
                                        <a href="/capitalshop/startbootstrap-shop-homepage-gh-pages (1)/startbootstrap-shop-homepage-gh-pages/index.html">الحفلات <i class="fas fa-angle-down"></i></a>
                                        <ul class="submenu">
                                            <li style="text-align:center;"><a href="/capitalshop/startbootstrap-shop-homepage-gh-pages (1)/startbootstrap-shop-homepage-gh-pages/index1.html">حفلات الزفاف</a></li>
                                            <li style="text-align:center;"><a href="/capitalshop/startbootstrap-shop-homepage-gh-pages (1)/startbootstrap-shop-homepage-gh-pages/index2.html">حفلات الخطوبة والمناسبات</a></li>
                                            <li style="text-align:center;"><a href="/capitalshop/startbootstrap-shop-homepage-gh-pages (1)/startbootstrap-shop-homepage-gh-pages/index.html"> حفلات الحناء والأثواب التقليدية </a></li>
                                            <li style="text-align:center;"><a href="#">حفلات التخرج</a></li>
                                        </ul>
                                    </li>
                                                                    <li><a href="shopp.html">الأطفال</a></li>
                                    <li><a href="shopp.html">رجال</a></li>
                                    <li><a href="shopp.html">نساء</a></li>
                                    <li><a href="index.html">الرئيسية</a></li>
                                </ul>
                            </nav>
                        </div>
        
    
    
                        <div class=" main-menu d-none d-lg-block" style="margin-right: 4%">
                            <nav  >
                                <ul id="navigation">
                                    <li>
                                 
    <!--                                   
                                        <li>
                                            <div class="nav-search search-switch hearer_icon">
                                                <a id="search_1" href="javascript:void(0)">
                                                    <span class="flaticon-search"></span>
                                                </a>
                                            </div>
                                        </li> -->
                                      <!-- عنصر سلة التسوق المعدل -->
                                      <li class="cart mini_cart_wrapper" style="position: relative;">
                                        <a href="javascript:void(0)">
                                          <span class="flaticon-shopping-cart"></span>
                                          <span class="item_count" id="numberOfSelectedItems"></span>
                                        </a>
                                        <!-- القائمة المصغرة للمحتويات -->
                                        <div class="mini_cart" style="display: none; position: absolute; top: 100%;">
                                          <div class="cart_gallery" id="cartGallery">
                                            <!-- المحتويات هنا -->
                                          </div>
                                          <div class="mini_cart_footer">
                                            <div class="cart_button">
                                              <a href="cart.html" style="font-size: 14px; width: 40%; height: 10px; position: relative; left: 30%; font-size: 10px; margin-top: 2%; display: inline-flex; justify-content: center; align-items: center;">
                                                <i class="fa fa-shopping-cart"></i> View cart
                                              </a>
                                            </div>
                                          </div>
                                        </div>
                                      </li>
                                      
    
                                    <li>
                                        <a href="#" id="userIcon"> <span class="flaticon-user"></span> <i class="fas fa-angle-down"></i></a>
                                        <ul class="submenu"> <!-- قائمة المستخدم -->
                                             <li style="text-align:center;" id="userAccount"><a href="UserProfile.html">حسابي</a></li>
                                        
                                            <li style="text-align:center;"  id="login"><a href="login.html">حسابي/تسجيل</a></li>
                                            <li style="text-align:center;"><a href="register.html">إنشاء حساب</a></li>
                                        </ul>
                                    </li>
                                    </ul>
                                    
                                    </li>
                                 
                                </ul>
                            </nav>
                        </div>
        
                 
        
        
                    <div class="col-12">
                        <div class="mobile_menu d-block d-lg-none"></div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <div class="product-card">
        <div class="image-wrapper">
            <img src="/Backend/Masterpiece/Masterpiece/Uploads/logo2.png" width="150px"
            height="150px" alt="SecondLifeClothes" class="product-image">
        </div>
        <div class="details-wrapper">
       
            <p class="price" id="amount"></p>
            <p class="description" style="direction: rtl;text-align: right;">
                في Second Wardrobe Store، نولي أهمية لراحتك وأمانك، مما يضمن أن تجربتك في التسوق سلسة من البداية إلى النهاية. تم تصميم نظام الدفع لدينا لتوفير مجموعة من الخيارات الآمنة والمرنة، مما يتيح لك اختيار الطريقة التي تناسب احتياجاتك. </p>
            <p class="terms">*Terms and Conditions Apply</p>
            <div class="paypal-button-container" id="paypal-button-container"></div>
        </div>
    </div>
    <footer>
        <div class="footer-wrapper gray-bg">
            <div class="footer-area footer-padding">
    
                <!-- قسم الاشتراك في النشرة الإخبارية -->
                <section class="subscribe-area">
                    <div class="container">
                        <div class="row justify-content-between subscribe-padding">
                            <div class="col-xxl-2 col-xl-2 col-lg-4">
                                <div class="footer-social">
                                    <a href="https://www.facebook.com/RawaahAbdAlrahman?_rdc=1&_rdr"><i class="fab fa-facebook"></i></a>
                                    <a href="https://www.instagram.com/rawaahababneh/"><i class="fab fa-instagram"></i></a>
                                    <a href="https://www.youtube.com/@rawaahababneh4863"><i class="fab fa-youtube"></i></a>
                                </div>
                            </div>
                           
                            <div class="col-xxl-5 col-xl-6 col-lg-7 col-md-9">
                                <div class="subscribe-caption">
                                    <form action="#">
                                        <input type="text" placeholder="أدخل بريدك الإلكتروني">
                                        <button class="subscribe-btn">اشترك</button>
                                    </form>
                                </div>
                            </div>
                            <div class="col-xxl-3 col-xl-3 col-lg-4">
                                <div class="subscribe-caption">
                                    <h3>اشترك في النشرة الإخبارية</h3>
                                    <p>اشترك في النشرة الإخبارية للحصول على خصم 5% على جميع المنتجات.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
    
                <!-- قسم معلومات الفوتر -->
                <div class="container">
                    <div class="row justify-content-between">
                      
                        <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6">
                            <div class="single-footer-caption mb-50">
                                <div class="footer-tittle">
                                    <h4>تسوق للرجال</h4>
                                    <ul id="Subcategories2">
                                        
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6">
                            <div class="single-footer-caption mb-50">
                                <div class="footer-tittle">
                                    <h4>تسوق للنساء</h4>
                                    <ul id="dynamicSubcategories">
                                        <!-- سيتم إدراج الفئات الفرعية هنا بشكل ديناميكي -->
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6">
                            <div class="single-footer-caption mb-50">
                                <div class="footer-tittle">
                                    <h4>معلومات</h4>
                                    <ul>
                                        <li><a href="About1.html">من نحن</a></li>
                                      
                                        <li><a href="index.html#Contact">تواصل معنا</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-3 col-md-6 col-sm-8">
                            <div class="single-footer-caption mb-50">
                                <div class="single-footer-caption mb-20">
                                    <div class="footer-logo mb-35">
                                        <a href="index.html"><img src="assets/img/logo/logo2_footer.png" alt="شعار"></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
    
            </div>
        </div>
    </footer>
    <script >
        async function loadSubcategories(categoryId) {
    try {
        const response = await fetch(`https://localhost:44332/api/SubCategory/GetSUbCategoryBYCtegoryID/${categoryId}`);
        const subcategories = await response.json();

        // تحديد عدد الفئات المراد عرضها (مثلاً 4)
        const maxItems = 4;
        const subcategoryContainer = document.getElementById('dynamicSubcategories');
        subcategoryContainer.innerHTML = ''; // تفريغ المحتوى السابق

        // استخدام slice لتحديد أول أربع فئات فقط
        subcategories.slice(0, maxItems).forEach(subcategory => {
            const listItem = document.createElement("li");
            listItem.innerHTML = `<a href="#" data-id="${subcategory.subcategoryId}">${subcategory.subcategoryName}</a>`;
            subcategoryContainer.appendChild(listItem);
        });
    } catch (error) {
        console.error('Error fetching subcategories:', error);
    }
}

// استدعاء الدالة مع معرف الفئة المرغوبة (categoryId) لجلب الفئات الفرعية وعرضها في الفوتر
loadSubcategories(6); // استبدل "1" بمعرف الفئة المطلوب


async function Subcategories(categoryId) {
    try {
        const response = await fetch(`https://localhost:44332/api/SubCategory/GetSUbCategoryBYCtegoryID/${categoryId}`);
        const subcategories = await response.json();

        // تحديد عدد الفئات المراد عرضها (مثلاً 4)
        const maxItems = 4;
        const subcategoryContainer = document.getElementById('Subcategories2');
        subcategoryContainer.innerHTML = ''; // تفريغ المحتوى السابق

        // استخدام slice لتحديد أول أربع فئات فقط
        subcategories.slice(0, maxItems).forEach(subcategory => {
            const listItem = document.createElement("li");
            listItem.innerHTML = `<a href="#" data-id="${subcategory.subcategoryId}">${subcategory.subcategoryName}</a>`;
            subcategoryContainer.appendChild(listItem);
        });
    } catch (error) {
        console.error('Error fetching subcategories:', error);
    }
}

// استدعاء الدالة مع معرف الفئة المرغوبة (categoryId) لجلب الفئات الفرعية وعرضها في الفوتر
Subcategories(2); // استبدل "1" بمعرف الفئة المطلوب

    </script>
    <script src="https://www.paypal.com/sdk/js?client-id=Adtb6XkpqqndM80PndrUC19_b7NqNe4BDiNI5b3beOJWq1bUyoPk4QQABWoxFInvtrj3PPuvcU0X24p8&currency=USD"></script>
    <script>
        const amount = localStorage.getItem("amountForPay");
        const userID = localStorage.getItem("UserId");
        document.getElementById("amount").innerHTML = amount;

        async function initPayPalButton() {
            paypal.Buttons({
                style: {
                    shape: 'rect',
                    color: 'gold',
                    layout: 'vertical',
                    label: 'paypal',
                },

                createOrder: function (data, actions) {
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                currency_code: "USD",
                                value: amount
                            }
                        }]
                    });
                },

                onApprove: async function (data, actions) {
                    try {
                        const orderData = await actions.order.capture();
                        console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));

                        const paymentData = {
                            UserId: userID,
                            Amount: amount,
                            TransactionId: orderData.id, // استخدام معرف الطلب من PayPal
                            PaymentStatus: orderData.status // حالة الدفع
                        };

                        // Call the API using fetch
                        const paymentResponse = await fetch("https://localhost:44332/api/Payment/create-payment", {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify(paymentData)
                        });

                        if (!paymentResponse.ok) {
                            throw new Error('Payment creation failed');
                        }

                        const paymentResult = await paymentResponse.json();
                        console.log('Payment saved successfully', paymentResult);

                        // Create the order
                        const orderResponse = await fetch(`https://localhost:44332/api/Order/CreateOrder/${userID}`, {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({ UserId: userID, Amount: amount, TransactionId: orderData.id })
                        });

                        if (!orderResponse.ok) {
                            throw new Error('Order creation failed');
                        }

                        const orderResult = await orderResponse.json();
                        console.log('Order created successfully', orderResult);

                        // Show a success message
                        const element = document.getElementById('paypal-button-container');
                        element.innerHTML = '<h3>Thank you for your payment!</h3>';

                        // Redirect to the my-account page after a short delay
                        setTimeout(function () {
                            window.location.href = "index.html";
                        }, 2000); // Adjust delay as needed

                    } catch (error) {
                        console.error('Error occurred:', error);
                    }
                },

                onError: function (err) {
                    console.error('PayPal Error:', err);
                }
            }).render('#paypal-button-container');
        }

        // Initialize PayPal button
        window.onload = initPayPalButton;
    </script>
</body>
</html>
